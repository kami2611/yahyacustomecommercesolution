<%- include('cart-popup') %>

<footer class="site-footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3 class="footer-brand">E-Commerce Store</h3>
        <p>Your one-stop shop for all your needs</p>
      </div>
      
      <div class="footer-section">
        <h4>Follow Us</h4>
        <div class="social-links">
          <a href="#" class="social-link" title="Facebook">f</a>
          <a href="#" class="social-link" title="YouTube">â–¶</a>
          <a href="#" class="social-link" title="Instagram">ðŸ“·</a>
          <a href="#" class="social-link" title="Pinterest">P</a>
          <a href="#" class="social-link" title="TikTok">â™ª</a>
        </div>
      </div>
      
      <div class="footer-section newsletter">
        <h4>Newsletter</h4>
        <p>Sign up for exclusive vouchers and rewards!</p>
        <form id="newsletter-form" class="newsletter-form">
          <input type="email" name="email" placeholder="Enter your email" required class="newsletter-input" id="newsletter-email">
          <button type="submit" class="newsletter-btn" id="newsletter-btn">Sign up</button>
        </form>
        <p class="newsletter-message" id="newsletter-message" style="display: none;"></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; <%= new Date().getFullYear() %> E-Commerce Store. All rights reserved.</p>
    </div>
  </div>
</footer>

<script>
  document.getElementById('newsletter-form')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const emailInput = document.getElementById('newsletter-email');
    const btn = document.getElementById('newsletter-btn');
    const message = document.getElementById('newsletter-message');
    const email = emailInput.value.trim();
    
    if (!email) return;
    
    btn.disabled = true;
    btn.textContent = 'Signing up...';
    
    try {
      const response = await fetch('/newsletter/subscribe', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email })
      });
      
      const data = await response.json();
      
      message.style.display = 'block';
      message.style.color = data.success ? '#2a7d2e' : '#d32f2f';
      message.textContent = data.message;
      
      if (data.success) {
        emailInput.value = '';
      }
    } catch (error) {
      message.style.display = 'block';
      message.style.color = '#d32f2f';
      message.textContent = 'Error subscribing. Please try again.';
    }
    
    btn.disabled = false;
    btn.textContent = 'Sign up';
  });
</script>
